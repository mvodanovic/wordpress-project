<VirtualHost *:443>
	ServerName frozen-spring.com

	ProxyPass / "https://localhost:20443/"
	ProxyPassReverse / "https://localhost:20443/"
	ProxyPreserveHost On
	ProxyAddHeaders On

	SSLEngine On
	SSLProxyEngine On
	SSLCertificateFile /path/to/frozen-spring/ssl/www_frozen-spring_com.web.crt
	SSLCertificateKeyFile /path/to/frozen-spring/ssl/www_frozen-spring_com.key
	SSLCACertificateFile /path/to/frozen-spring/ssl/marko_vodanovic.ca.crt

	<Location ~ "/wp-(login\.php|admin)">
		SSLVerifyClient require
		SSLVerifyDepth 1
		SSLRenegBufferSize 52428800
	</Location>

	ErrorLog /path/to/frozen-spring/logs/frozen-spring.host.apache2.error.log
	LogFormat "%{X-Forwarded-For}i %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\"" combined
	CustomLog /path/to/frozen-spring/logs/frozen-spring.host.apache2.access.log combined
</VirtualHost>

<VirtualHost *:443>
        ServerName phpmyadmin.frozen-spring.vodanovic.net

        ProxyPass / "http://localhost:20080/"
        ProxyPassReverse / "http://localhost:20080/"
        ProxyPreserveHost On
        ProxyAddHeaders On

        SSLEngine On
        SSLProxyEngine On
        SSLCertificateFile /path/to/frozen-spring/ssl/vodanovic_net.web.crt
        SSLCertificateKeyFile /path/to/frozen-spring/ssl/vodanovic_net.key
        SSLCACertificateFile /path/to/frozen-spring/ssl/marko_vodanovic.ca.crt

        SSLVerifyClient require
        SSLVerifyDepth 1

        ErrorLog  /path/to/frozen-spring/logs/phpmyadmin.host.apache2.error.log
        LogFormat "%{X-Forwarded-For}i %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\"" combined
        CustomLog /path/to/frozen-spring/logs/phpmyadmin.host.apache2.access.log combined
</VirtualHost>

<VirtualHost *:443>
	ServerName www.frozen-spring.com

	RedirectTemp / https://frozen-spring.com/

	ErrorLog /path/to/frozen-spring/logs/frozen-spring.host.apache2.error.log
	CustomLog /path/to/frozen-spring/logs/frozen-spring.host.apache2.access.log combined
</VirtualHost>


<VirtualHost *:80>
	ServerName frozen-spring.com
	ServerAlias *.frozen-spring.com

        <Location ~ "^(?!\/\.well-known\/acme-challenge)\/.*">
                RedirectTemp / https://frozen-spring.com/
        </Location>

	ErrorLog /path/to/frozen-spring/logs/frozen-spring.host.apache2.error.log
	CustomLog /path/to/frozen-spring/logs/frozen-spring.host.apache2.access.log combined
</VirtualHost>

<VirtualHost *:80>
	ServerName phpmyadmin.frozen-spring.vodanovic.net

        <Location ~ "^(?!\/\.well-known\/acme-challenge)\/.*">
                RedirectTemp / https://phpmyadmin.frozen-spring.vodanovic.net/
        </Location>

	ErrorLog /path/to/frozen-spring/logs/phpmyadmin.host.apache2.error.log
	CustomLog /path/to/frozen-spring/logs/phpmyadmin.host.apache2.access.log combined
</VirtualHost>



# vim: syntax=apache ts=4 sw=4 sts=4 sr noet
